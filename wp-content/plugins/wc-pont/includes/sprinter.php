<?php
/*
 * @version $Id: Pont V7.3 2021-05-08 szathmari.hu $
 * @copyright Copyright (C) 2021 szathmari.hu - All rights reserved.
 * @license commerical
 * @url https://szathmari.hu
*/
 use setasign\Fpdi\Fpdi; goto LUxTH; LUxTH: class sprinter { public $parcel; public $partner; public $token; public $PartnerPudoServiceWSDL = "\x68\x74\x74\160\163\72\x2f\57\x74\x73\170\56\154\141\160\153\145\162\x2e\150\x75\57\x50\x75\x64\x6f\124\x65\x73\x74\x2f\120\141\162\x74\x6e\145\162\120\165\x64\x6f\x53\x65\x72\166\151\143\145\x3f\167\163\144\x6c"; public $PudoDocumentServiceWSDL = "\150\164\x74\160\163\72\57\57\164\x73\170\56\x6c\141\160\x6b\145\162\56\150\165\57\x50\165\x64\x6f\x54\x65\163\164\x2f\x50\x75\x64\157\104\157\x63\165\x6d\145\156\x74\123\145\162\166\151\143\x65\x3f\167\163\x64\x6c"; public $soap_options = array("\x66\x65\x61\x74\x75\x72\x65\x73" => SOAP_SINGLE_ELEMENT_ARRAYS, "\143\x61\143\x68\x65\137\x77\x73\x64\x6c" => WSDL_CACHE_NONE); function init() { goto h14Z3; olP3Z: include "\154\151\x62\x2f\x50\165\144\157\x44\x6f\x63\x75\x6d\145\156\x74\x53\145\x72\166\x69\x63\x65\56\160\150\160"; goto kCC4u; fU2P0: vKMS8: goto olP3Z; kCC4u: include "\x6c\151\142\57\120\141\162\164\x6e\145\162\x50\x75\144\157\123\145\162\166\x69\x63\145\56\x70\150\160"; goto IMicy; kYkj0: if (!(get_option("\167\143\137\160\x6f\156\164\137\x73\160\162\x69\x6e\x74\145\x72\137\x74\x65\x73\x74", "\171\145\163") === "\x6e\x6f")) { goto vKMS8; } goto dzK5E; V_UyD: $this->partner = get_option("\x77\143\x5f\160\157\x6e\x74\137\163\x70\162\151\x6e\164\145\x72\x5f\x70\141\x72\x74\x6e\x65\x72"); goto ZCdaj; h14Z3: if (empty(get_option("\x77\x63\137\160\157\x6e\x74\137\163\x70\x72\x69\156\164\x65\x72\x5f\x70\x61\x72\x74\156\x65\x72"))) { goto xich2; } goto V_UyD; wznXd: $this->token = get_option("\167\x63\x5f\x70\x6f\156\164\x5f\x73\160\162\x69\x6e\164\145\162\137\x74\157\153\x65\156"); goto kYkj0; W1hft: $this->PudoDocumentServiceWSDL = empty(get_option("\x77\x63\137\160\157\x6e\x74\x5f\163\160\162\151\156\164\x65\x72\x5f\x64\157\143\x75\155\x65\156\164\x5f\165\162\x6c")) ? "\x68\x74\164\x70\x73\x3a\x2f\x2f\x74\163\170\x2e\154\x61\x70\153\145\x72\x2e\150\x75\x2f\120\x75\144\x6f\120\162\x6f\x64\57\120\x75\144\157\x44\x6f\x63\x75\155\x65\x6e\164\x53\145\162\166\x69\143\x65\77\167\163\144\x6c" : get_option("\167\143\x5f\160\x6f\156\x74\x5f\x73\x70\x72\x69\156\x74\x65\x72\137\x64\x6f\x63\x75\x6d\145\156\x74\137\x75\162\154"); goto fU2P0; dzK5E: $this->PartnerPudoServiceWSDL = empty(get_option("\x77\143\x5f\x70\x6f\x6e\x74\137\x73\x70\162\151\x6e\164\x65\162\137\x70\141\162\164\x6e\145\162\137\x75\x72\154")) ? "\x68\164\164\160\163\x3a\57\57\x74\163\170\56\154\x61\x70\x6b\x65\x72\x2e\x68\165\x2f\120\165\144\157\x50\162\157\144\x2f\120\141\162\164\x6e\145\x72\x50\165\144\x6f\x53\145\162\166\x69\x63\145\x3f\167\x73\x64\x6c" : get_option("\x77\x63\137\x70\x6f\156\164\x5f\x73\160\162\x69\156\x74\145\x72\137\x70\141\162\x74\156\x65\x72\137\x75\x72\154"); goto W1hft; ZCdaj: xich2: goto wznXd; IMicy: } function setDOP($pont, $parcel) { $parcel->DestinationLocationId = $pont[2]; return true; } function requestOne($parcels) { goto FVRaO; X4XDC: $request->PartnerCode = $this->partner; goto r19th; Ifxdc: try { goto M17r0; Qsgqq: return; goto XLcfG; KOfw1: foreach ($ParcelResults->ParcelResult as $Parcel) { goto fAWWl; t4WdR: if ($Parcel->ErrorCode == "\120\x53\122\137\117\113") { goto vBuyL; } goto XGAVV; BtCxz: $order = new WC_Order($order_id); goto XYvBt; xYANz: goto I0kco; goto Y5jHp; FVftg: WC_Pont::st_array("\160\x6f\156\x74\x5f\x65\162\x72\x6f\162\163", $order_id, __("\103\xc3\xad\155\x6b\145\40\150\151\142\x61", "\167\x63\x2d\160\157\156\x74") . "\72\40" . $Parcel->ErrorMessageInternational); goto fIfmi; SKOdZ: WC_Pont::log("\x45\x78\160\x6f\162\x74\x3a\x20\120\141\x72\x63\x65\x6c\72\40" . "\x20\x6f\162\x64\x65\162\40\x69\144\x3a\40" . $order_id . "\40\143\157\144\145\72\x20" . $Parcel->ErrorCode, "\145\162\x72\157\x72"); goto lJ5cw; fAWWl: $order_id = $parcels[$i]->OrderId; goto p1Y9L; XGAVV: WC_Pont::st_array("\160\x6f\x6e\164\x5f\145\x72\x72\157\162\x73", $order_id, __("\103\163\x6f\155\141\x67\150\x69\142\x61", "\167\x63\55\x70\x6f\x6e\x74") . "\x3a\x20" . $Parcel->ErrorCode); goto SKOdZ; p1Y9L: $i++; goto BtCxz; ZRwvZ: goto Zp_iQ; goto VYiEv; wpCxV: WC_Pont::st_array("\x70\157\156\x74\x5f\160\x63\x6c\163", $order_id, $Parcel->NewBarCode); goto itGv8; lJ5cw: goto Zp_iQ; goto xYANz; XYvBt: WC_Pont::log("\x45\170\160\x6f\162\164\x3a\x20\120\141\162\143\145\x6c\163\40" . "\40\x6f\162\x64\145\162\40\x6e\165\x6d\142\x65\x72\x3a\40" . $order_id . "\157\162\x64\x65\162\40\151\x64\x3a\40" . $parcels[$i]->AutorizationCode . "\x20\120\x61\162\x63\145\x6c\122\x65\163\x75\x6c\164\x73\x3a\40" . json_encode($Parcel), "\x69\156\146\157"); goto T9pkT; Y_3pD: $pont_pcls[$order_id] = $Parcel->NewBarCode; goto wpCxV; VYiEv: l7jr0: goto t4WdR; fIfmi: WC_Pont::log("\x45\170\x70\x6f\162\x74\x3a\x20\x63\x61\x72\162\151\x65\162\72\x20\163\x70\x72\151\x6e\x74\145\162" . "\40\157\162\144\x65\162\x20\151\x64\72\40" . $order_id . "\40\x50\x61\162\x63\x65\x6c\x3a\40" . $Parcel->ErrorMessageInternational, "\x65\162\162\x6f\x72"); goto ZRwvZ; gOKqw: $exported++; goto r_AZt; r_AZt: Zp_iQ: goto GTcAK; Y5jHp: vBuyL: goto CqWNy; yTZhg: $barcodes[] = new BarcodeData($Parcel->NewBarCode); goto Y_3pD; T9pkT: if (!(!is_null($Parcel->ErrorMessageInternational) || $Parcel->ErrorMessageInternational != '')) { goto l7jr0; } goto FVftg; itGv8: I0kco: goto gOKqw; CqWNy: WC_Pont::log("\105\x78\160\x6f\x72\164\72\x20\x42\x61\x72\x63\157\x64\x65\x20\157\162\144\145\x72\x20\x69\x64\x3a\40" . $order_id . "\40\142\141\x72\143\157\x64\145\x3a\x20" . $Parcel->NewBarCode, "\151\156\x66\x6f"); goto yTZhg; GTcAK: } goto JPC6C; bvnq7: switch ($MassDocumentResponse->GetDocumentResult->Result) { case "\x52\105\x53\137\117\113": goto HavNy; dPrRy: foreach ($MassDocumentResponse->GetDocumentResult->Documents->DocumentData as $docResponse) { goto HyQMN; y08ef: xbh3u: goto G3ahb; zYFe5: $pont_pdf2[] = $filename; goto uq_kV; mz8aJ: file_put_contents(trailingslashit(WC_Pont::wc_pont_upload_dir()) . $filename, $docResponse->Document); goto WgJfe; vZtCp: $filename = date("\x59\x2d\x6d\55\x64\137\110\x69\x73") . "\x2d" . $docResponse->DocumentName . "\55" . $_index++ . "\56\x70\x64\146"; goto mz8aJ; X7VjA: BXkTK: goto y08ef; G3ahb: eAvdg: goto Yffsq; WgJfe: if (strpos($filename, "\x50\141\x63\x6b\x61\x67\x65\114\141\x62\145\x6c")) { goto vopim; } goto Y__c_; Vb8iS: vopim: goto WQC5Q; WQC5Q: foreach ($pont_pcls as $order_id => $v) { goto q5u8W; JQJ4v: $order = new WC_Order($order_id); goto OBFqK; ThYRs: set_transient("\x70\x6f\156\164\137\143\x61\162\162\151\145\x72", "\x70\151\x63\x6b", 5 * MINUTE_IN_SECONDS); goto nywHc; OBFqK: $order->update_status(get_option("\167\143\x5f\160\x6f\156\x74\137\145\x78\160\x6f\162\x74\x5f\x6f\x72\144\x65\x72\137\x73\x74\x61\x74\x75\163")); goto hwnfv; nywHc: if (!(get_option("\167\x63\137\160\157\x6e\164\x5f\x65\x78\160\x6f\x72\164\137\155\157\144\137\x73\x74\141\x74\165\163") == "\171\145\163")) { goto fWLe9; } goto JQJ4v; yyRl_: ZDa3r: goto BR8vo; q5u8W: WC_Pont::st_array("\x70\157\x6e\164\137\160\144\146", $order_id, $filename); goto ThYRs; hwnfv: fWLe9: goto yyRl_; BR8vo: } goto X7VjA; Y__c_: $pont_pdf2 = get_transient("\x70\x6f\156\x74\137\160\x64\146\62"); goto zYFe5; HyQMN: WC_Pont::log("\x45\x78\160\x6f\x72\x74\72\x20\114\x61\142\145\x6c\40\x4f\113" . "\x20\x6f\x72\x64\x65\x72\40\151\x64\72\40" . $order_id . "\x20\143\x72\145\x61\x74\145\40\154\x61\142\x65\154\x20\x72\x65\x73\165\154\x74\x20\x64\x6f\x63\x73\72\40" . $docResponse->DocumentName, "\x69\156\146\x6f"); goto vZtCp; uq_kV: set_transient("\x70\x6f\x6e\x74\137\x70\x64\x66\x32", $pont_pdf2, 5 * MINUTE_IN_SECONDS); goto fFlpy; fFlpy: goto xbh3u; goto Vb8iS; Yffsq: } goto G0Y_T; T7ek8: $_index = 1; goto dPrRy; AAgZQ: foreach ($DocumentResults as $DocumentGenerationResult) { goto wr4mW; zMrVV: Iv_Ac: goto vGbwI; Lzbbt: khFlg: goto zMrVV; wr4mW: if (!(!is_null($DocumentGenerationResult->ResultMessage) || $DocumentGenerationResult->ResultMessage != '')) { goto khFlg; } goto vF1MH; vF1MH: WC_Pont::log("\x45\170\x70\x6f\162\164\72\x20\162\145\x73\165\x6c\164\40\x6d\145\x73\163\141\x67\145\x3a\x20" . $DocumentGenerationResult->ResultMessage, "\x69\x6e\x66\157"); goto Lzbbt; vGbwI: } goto dGAwo; dGAwo: unSG8: goto T7ek8; G0Y_T: YzR4K: goto Omvgg; Omvgg: goto r9tfU; goto SFwUy; HavNy: $DocumentResults = $MassDocumentResponse->GetDocumentResult->DocumentGenerationResults->DocumentGenerationResult; goto AAgZQ; SFwUy: case "\122\x45\x53\137\104\x41\x54\x41\x5f\x4d\x49\123\123\111\116\107": goto wZtQl; b8Fu7: WC_Pont::log("\x45\x78\160\157\x72\x74\x3a\40\x63\141\162\x72\151\145\x72\72\40\163\x70\162\x69\156\164\x65\x72" . "\x20\x6f\162\x64\145\x72\40\151\144\x3a\40" . $order_id . "\x20\x43\162\145\x61\x74\145\40\154\141\142\145\x6c\x3a\40" . "\115\x69\x73\163\x69\x6e\x67\x20\x64\x61\164\141", "\x65\x72\162\157\x72"); goto JRN79; JRN79: goto r9tfU; goto UFZk2; wZtQl: WC_Pont::st_array("\160\157\156\x74\137\x65\x72\162\x6f\162\163", $order_id, __("\x48\x69\303\xa1\x6e\x79\172\x69\x6b\x20\x61\x7a\x20\141\x64\141\164", "\167\143\55\160\157\156\x74")); goto b8Fu7; UFZk2: case "\x52\x45\x53\x5f\x47\105\x4e\x45\x52\101\x54\x45\137\x45\x52\x52\x4f\x52": goto JIGN2; JIGN2: WC_Pont::st_array("\160\x6f\x6e\x74\137\x65\162\162\x6f\162\x73", $order_id, __("\x48\151\x62\x61\40\164\xc3\266\x72\x74\303\xa9\x6e\x74\x20\141\x20\x67\145\x6e\x65\x72\xc3\241\154\303\xa1\163\40\163\x6f\162\xc3\xa1\156", "\x77\143\x2d\x70\157\156\x74")); goto ofGuC; ofGuC: WC_Pont::log("\105\x78\160\157\162\x74\72\x20\143\141\x72\162\151\x65\x72\72\40\x73\160\162\x69\156\164\x65\x72" . "\x20\157\162\x64\145\162\40\151\144\x3a\x20" . $order_id . "\40\103\162\145\x61\164\x65\x20\x6c\141\142\x65\x6c\72\40" . "\x47\x65\x6e\x65\162\141\x74\145\x20\145\x72\162\x6f\162", "\145\x72\162\157\162"); goto TOZpH; TOZpH: goto r9tfU; goto s5NUn; s5NUn: default: goto NqH59; NqH59: WC_Pont::st_array("\160\x6f\156\x74\137\x65\x72\x72\157\162\163", $order_id, $MassDocumentResponse->GetDocumentResult->Result); goto nuSQg; gtQ8B: goto r9tfU; goto tEldW; nuSQg: WC_Pont::log("\105\x78\160\157\162\x74\x3a\x20\x63\141\162\x72\151\x65\x72\x3a\x20\x73\x70\162\x69\156\164\145\x72" . "\40\x6f\162\144\145\162\40\x69\x64\72\40" . $order_id . "\40\103\162\145\x61\x74\x65\x20\154\141\142\x65\x6c\72\x20" . $MassDocumentResponse->GetDocumentResult->Result, "\x65\x72\162\157\162"); goto gtQ8B; tEldW: } goto klk9W; oC1HM: $MassDocumentResponse = $DocumentClient->GetDocument($MassDocumentRequest); goto LiSjy; AKH3e: $ParcelResults = $RegisterParcelContainerResponse->RegisterParcelContainerResult->ParcelResults; goto KOfw1; vZRo_: $DocumentClient = new DocumentService($this->PudoDocumentServiceWSDL, $this->soap_options); goto oC1HM; JPC6C: AUddG: goto jHKe7; Qjtz_: $size = get_option("\167\143\137\160\157\156\x74\x5f\163\160\162\151\x6e\164\145\x72\x5f\163\151\172\145", "\104\x53\x5f\62\x78\62"); goto aPDJ5; Rbi10: $RegisterParcelContainerResponse = $PartnerPudoServiceClient->RegisterParcelContainer($request); goto Shznb; aPDJ5: $documentSetting->Size = $size; goto nhIeh; fsx1N: $pont_pcls = []; goto tORLW; Shznb: if (!($PartnerPudoServiceClient == null || $RegisterParcelContainerResponse->RegisterParcelContainerResult->ParcelResults == null)) { goto WFshn; } goto ZQiu4; klk9W: PCgLt: goto qatD9; uJMDu: $documentSetting = new DocumentSetting(); goto z0f9j; tORLW: $i = 0; goto kDyrW; kDyrW: $exported = 0; goto AKH3e; XLcfG: WFshn: goto L4P0P; xBIN7: $documentSetting->Position = LabelDocumentPosition::$P_0; goto Qjtz_; nhIeh: $documentSetting->Type = DocumentType::$DT_All; goto AV3Gy; L4P0P: $barcodes = []; goto fsx1N; ZQiu4: WC_Pont::log("\105\x78\x70\157\162\164\x3a\40\143\141\162\162\151\145\162\72\40\163\x70\162\x69\156\164\145\162" . "\x20\120\141\x72\143\x65\x6c\x52\145\163\x75\154\x74\x73\x3a\40" . "\105\155\x70\x74\x79\40\x52\x65\163\160\x6f\156\163\145\x21", "\145\x72\162\157\162"); goto Qsgqq; AV3Gy: $DocumentSettings[] = $documentSetting; goto oz0F3; LiSjy: WC_Pont::log("\x45\170\x70\157\x72\x74\72\x20\103\162\145\141\x74\x65\x20\x6c\141\142\x65\154\40\x72\x65\x73\165\x6c\164\72\x20" . json_encode($MassDocumentResponse->GetDocumentResult->Result) . "\x20\x4d\141\163\x73\40\x72\x65\x73\x70\x6f\x6e\x73\145\72\40" . json_encode($MassDocumentResponse->GetDocumentResult->DocumentGenerationResults), "\x69\156\146\157"); goto bvnq7; oz0F3: $MassDocumentRequest = new MassDocumentRequest(); goto HWWpp; z0f9j: $documentSetting->IsPositioned = false; goto xBIN7; M17r0: $PartnerPudoServiceClient = new PartnerPudoService($this->PartnerPudoServiceWSDL, $this->soap_options); goto Rbi10; d6jGc: c_Pq3: goto zvyRe; qatD9: r9tfU: goto d6jGc; HWWpp: $MassDocumentRequest->Barcodes = $barcodes; goto PB53n; jHKe7: if (!(count($barcodes) > 0)) { goto c_Pq3; } goto uJMDu; PB53n: $MassDocumentRequest->DocumentSettings = $DocumentSettings; goto vZRo_; zvyRe: } catch (exception $e) { goto HmlCs; drLp6: return 0; goto XwHvA; qi3w2: WC_Pont::st_array("\x70\x6f\156\x74\137\x65\x72\x72\157\x72\163", $order_id, __("\123\157\x61\x70\40\150\x69\142\141\56\40\x52\303\xa9\x73\x7a\x6c\145\x74\145\x6b\40\141\40\x68\x69\x62\x61\156\141\x70\x6c\303\xb3\x62\x61\x6e", "\167\x63\55\x70\157\x6e\164")); goto drLp6; SSx7n: WC_Pont::log("\105\x78\x70\157\162\x74\72\x20\143\141\x72\x72\x69\145\x72\72\40\x73\160\162\x69\x6e\164\145\162" . "\x20\157\162\144\x65\162\x20\151\x64\72\x20" . $order_id . "\40\123\x41\x4f\120\x20\x65\x72\x72\x6f\162\72\40" . json_encode($e), "\x65\162\x72\x6f\162"); goto qi3w2; HmlCs: error_log("\x50\x6f\x6e\x74\x20\x43\x73\157\155\x61\147\153\x75\154\144\157\40\x41\x50\x49\40\x68\x69\142\141\72\40" . json_encode($e)); goto SSx7n; XwHvA: } goto VnYTs; FVRaO: $request = new RegisterParcelContainerRequest(); goto X4XDC; VnYTs: return $exported; goto ZiTJt; r19th: $request->ParcelContainer = $parcels; goto wGU24; wGU24: $request->Token = $this->token; goto Ifxdc; ZiTJt: } } goto LV4fQ; LV4fQ: function export_sprinter($order_ids) { goto DkAYG; SiTve: foreach ($order_ids as $order_id) { goto XgSsS; jiDbr: qa_NP: goto Qs24v; ndQKW: $p = explode("\174", get_post_meta($order_id, "\x77\143\x5f\x73\x65\154\x65\x63\164\145\x64\x5f\x70\x6f\156\x74", true)); goto pvASZ; rZyOH: $parcel->CustomerAddress = $order->get_shipping_address_1(); goto k0sDM; B_nOY: Cs29c: goto ndQKW; lU50E: $_prefix = substr(get_option("\x77\143\137\160\x6f\x6e\164\137\163\160\162\x69\156\164\145\x72\137\x70\162\x65\146\x69\170") . $order_id . "\60" . date("\171\x6d\x64\110\151") . rand(100, 999), 0, 28); goto bzV1B; MK99p: $parcel->BarCode = $_prefix; goto GsoDO; S5va1: $pos2pos = get_option("\167\x63\137\160\x6f\x6e\x74\x5f\163\x70\162\x69\x6e\164\145\162\x5f\160\x6f\x73\x32\x70\x6f\x73", ''); goto vXt29; mQL63: $parcel = new Parcel(); goto HGITc; FY5Cc: if ($pos2pos == $p[2]) { goto qa_NP; } goto BMn0m; dFkgM: Zsedy: goto okg5t; JHUDu: $parcel->CustomerEmail = $order->get_billing_email(); goto PvsOq; rt4NJ: $sMethod = reset($sMethod); goto ni2wI; M4EFW: goto W84s0; goto Gusfy; AjMn0: $parcel->Description = !empty($order->get_customer_note()) ? $order->get_customer_note() : ''; goto osw8U; fdaBm: $parcels[] = $parcel; goto VzuQD; f8d5O: $parcel->PriceAtDeliveryCurrency = "\110\125\x46"; goto unxXu; YC4hU: goto W84s0; goto yiJHo; oovxw: $parcel->AutorizationCode = $order->get_order_number(); goto HDj_2; Wg7KS: WC_Pont::log("\105\x78\160\x6f\x72\x74\x3a\40\120\141\162\143\145\x6c\40\x64\157\156\145" . "\40\x6f\x72\x64\x65\x72\40\151\144\x3a\x20" . $order_id . "\40\160\x61\162\143\x65\154\72\x20" . json_encode($parcel), "\x69\156\146\x6f"); goto fdaBm; nOo9K: do_action("\x77\x6f\157\143\x6f\x6d\155\145\x72\143\145\137" . "\x77\143\x5f\160\x6f\x6e\x74" . "\137\x65\x78\160\x6f\x72\164\137\163\160\162\x69\156\164\145\x72\137\x64\x61\x74\141", $parcel, $order); goto Wg7KS; fOiiR: ZPWlF: goto RYzRW; nZ4DR: $parcel->CustomerStreetNumber = ''; goto I3zzE; w4GCt: goto xOcTW; goto jiDbr; RYzRW: if (!($csomag->setDOP($p, $parcel) === false)) { goto eKm4z; } goto yCkqC; Gusfy: eKm4z: goto S5va1; Qs24v: $parcel->ServiceType = ParcelServiceType::$Direct; goto MK99p; EnHcK: $parcel->CustomerAddress = $order->get_shipping_address_1() . "\40" . $order->get_shipping_address_2(); goto Vn2Ds; Bn11T: empty($order->get_shipping_country()) || ($parcel->CustomerCountryCode = $order->get_shipping_country()); goto ky4wd; yCkqC: WC_Pont::st_array("\160\x6f\x6e\164\137\145\162\162\157\x72\x73", $order->get_order_number(), __("\303\201\x74\x76\x65\x76\xc5\221\x70\x6f\x6e\164\x20\x6e\x65\155\x20\x74\141\x6c\xc3\xa1\154\x68\141\x74\303\xb3\x3a", "\x77\143\55\160\x6f\x6e\x74") . "\x20" . $p[2]); goto M4EFW; ai3W4: rLrQY: goto rZyOH; ky4wd: $parcel->CustomerPostalCode = $order->get_shipping_postcode(); goto ltA7B; p3R6q: $parcel->PackagePriceCurrency = "\x48\x55\x46"; goto jp0LQ; XgSsS: $order = new WC_Order($order_id); goto LOqDK; VzuQD: W84s0: goto cONXN; ycREI: $pont = get_post_meta($order_id, "\167\x63\x5f\163\x65\x6c\x65\143\x74\145\144\x5f\x70\157\x6e\x74", true); goto uiT00; ni2wI: if (!(strpos($sMethod["\x6d\x65\164\x68\x6f\144\x5f\x69\144"], "\154\x6f\x63\141\154\137\x70\x69\x63\x6b\165\x70") !== false)) { goto YQWB1; } goto XPe_W; HDj_2: $parcel->OrderId = $order_id; goto f8d5O; SWUA3: WC_Pont::st_array("\160\157\x6e\164\137\x65\162\x72\x6f\x72\163", $order->get_order_number(), sprintf(__("\101\x20\x72\145\x6e\x64\145\x6c\xc3\251\x73\164\x20\45\x73\40\x73\x7a\303\241\x6c\154\303\xad\164\xc3\241\x73\163\x61\154\40\x6b\xc3\xa9\x72\x74\145", "\167\143\x2d\160\x6f\x6e\164"), $p[1])); goto YC4hU; sUtlI: $parcel->PriceAtDelivery = $order->get_payment_method() == "\143\157\144" ? (float) $order->get_total() : 0; goto nOo9K; APQYD: $parcel->CustomerPhone = $order->get_billing_phone(); goto JHUDu; BMn0m: $parcel->ServiceType = ParcelServiceType::$Pos2Pos; goto ZxXih; MVS52: goto W84s0; goto uJFwR; uiT00: if ($pont) { goto Cs29c; } goto awVIj; XPe_W: WC_Pont::st_array("\160\x6f\156\x74\137\x65\x72\162\157\x72\x73", $order->get_order_number(), __("\x52\145\156\144\145\154\303\251\163\x20\156\145\155\40\153\x65\162\303\274\154\164\x20\x74\x6f\x76\303\241\142\142\303\255\x74\303\241\163\x72\x61\x2c\x20\x73\x7a\145\155\303\xa9\154\171\145\163\x20\xc3\241\x74\166\xc3\251\164\145\154\x6c\145\154\x20\x6b\303\xa9\x72\164\x65", "\x77\x63\x2d\x70\157\x6e\x74")); goto MVS52; k0sDM: $parcel->CustomerStreetNumber = $order->get_shipping_address_2(); goto dFkgM; znYoi: ssLlv: goto MksSk; osw8U: goto zC7WS; goto B_nOY; I3zzE: goto Zsedy; goto ai3W4; nkEWc: $parcel->TransitTime = get_option("\167\143\137\160\157\x6e\164\x5f\x73\x70\x72\x69\x6e\164\x65\162\x5f\164\x72\x61\x6e\163\151\x74\164\x69\x6d\145", 2); goto AjMn0; vXt29: if (!is_numeric($pos2pos)) { goto HG2AP; } goto FY5Cc; YHWle: $parcel->CustomerAddress = $order->get_shipping_address_1() . "\x20" . $order->get_shipping_address_2(); goto nZ4DR; ltA7B: $parcel->CustomerCity = $order->get_shipping_city(); goto EnHcK; okg5t: $parcel->PackageType = PackageType::$Small; goto ycREI; Vn2Ds: if ($order->get_shipping_address_2()) { goto rLrQY; } goto YHWle; bzV1B: $parcel->BarCode = $_prefix; goto oovxw; yiJHo: goto ssLlv; goto fOiiR; HGITc: $parcel->ServiceType = ParcelServiceType::$Normal; goto lU50E; F833H: $parcel->BarCode = $_prefix; goto nkEWc; jp0LQ: $parcel->CustomerName = $order->get_shipping_last_name() . "\x20" . $order->get_shipping_first_name(); goto APQYD; awVIj: $parcel->ServiceType = ParcelServiceType::$HomeDeliver; goto F833H; X3iPN: $parcel->CustomerCountryCode = "\x48\125"; goto Bn11T; LOqDK: $sMethod = $order->get_shipping_methods(); goto rt4NJ; uJFwR: YQWB1: goto mQL63; ZxXih: $parcel->BarCode = $_prefix; goto GaiAx; MksSk: zC7WS: goto sUtlI; pvASZ: if (strpos($p[1], WC_Pont::$carriers["\x70\151\143\153"]) !== false) { goto ZPWlF; } goto SWUA3; GaiAx: $parcel->PickupLocationId = $pos2pos; goto w4GCt; QJfDc: HG2AP: goto znYoi; PvsOq: $parcel->PriceAtDelivery = 0; goto X3iPN; unxXu: $parcel->PackagePrice = (float) $order->get_total(); goto p3R6q; GsoDO: xOcTW: goto QJfDc; cONXN: } goto LPM8C; gbHoY: goto g66yz; goto gMiXZ; kijgW: LNYKJ: goto PWmfG; rrMcw: $pdf = new Fpdi(); goto n4zc2; jVDaF: $pdf->setSourceFile($path . array_values($pont_pdf)[$i]); goto GG4p9; mV9IR: $path = trailingslashit(WC_Pont::wc_pont_upload_dir()); goto rrMcw; BJq57: $csomag = new sprinter(); goto NHCln; AQnZ_: if (!($i < count($pont_pdf))) { goto ds0d1; } goto jVDaF; gMiXZ: ds0d1: goto WB9Fm; nCclO: switch ($l) { case 1: goto ns7Ew; ns7Ew: $pdf->AddPage("\114", [297, 210]); goto TReb4; TReb4: $pdf->useImportedPage($pageId, 0, 0, 297); goto polKe; polKe: goto kXtXk; goto erLXl; erLXl: case 2: $pdf->useImportedPage($pageId, 297 / 2, 0, 297); goto kXtXk; case 3: $pdf->useImportedPage($pageId, 0, 210 / 2, 297); goto kXtXk; case 4: goto CognH; CognH: $pdf->useImportedPage($pageId, 297 / 2, 210 / 2, 297); goto z2TTQ; z2TTQ: $l = 0; goto KfstQ; KfstQ: goto kXtXk; goto gkKs1; gkKs1: } goto Ou8nU; ZpGvj: UWCvw: goto weR_V; YVv51: if (!($exp > 1)) { goto LNYKJ; } goto NRIof; n4zc2: $l = 1; goto x2PTM; LPM8C: okaOz: goto jmTJD; GG4p9: $pageId = $pdf->importPage(1); goto nCclO; bdQQ1: g66yz: goto AQnZ_; olfyX: $parcels = []; goto lg0t7; jmTJD: return $csomag->requestOne($parcels); goto YVv51; EdLLQ: require_once "\154\151\142\x2f\x61\165\x74\157\154\x6f\x61\144\x2e\160\150\x70"; goto mV9IR; lg0t7: $exp = 0; goto SiTve; NRIof: require_once "\x6c\x69\x62\x2f\x66\160\144\x66\x2e\x70\x68\160"; goto EdLLQ; IjZFu: kXtXk: goto NV51d; NV51d: $l++; goto ZpGvj; x2PTM: $pont_pdf = get_transient("\x70\x6f\x6e\x74\x5f\160\x64\146"); goto LQCD3; J4bwR: set_transient("\160\x6f\156\164\137\160\144\x66\103\x6f\x6d\142\x69\x65\144", basename($filename), 5 * MINUTE_IN_SECONDS); goto kijgW; DkAYG: WC_Pont::log("\x45\170\x70\157\x72\x74\72\40\143\141\162\x72\x69\x65\162\72\40\163\160\162\x69\156\x74\145\162\40\x73\164\141\162\164" . "\40\x6f\162\x64\145\162\40\151\x64\x73\x3a\x20" . json_encode($order_ids), "\151\x6e\146\157"); goto BJq57; C85LV: $pdf->Output($path . $filename, "\x46"); goto J4bwR; Ou8nU: MdUFp: goto IjZFu; LQCD3: $i = 0; goto bdQQ1; NHCln: $csomag->init(); goto olfyX; PWmfG: return $exp; goto T9igh; weR_V: $i++; goto gbHoY; WB9Fm: $filename = date("\x59\155\x64\55\110\151\x73") . "\x2d\x65\147\171\x65\x73\151\164\x65\164\164\x2e\x70\144\x66"; goto C85LV; T9igh: } goto bT6qs; bT6qs: function get_sprinter_tracking_info($pn, $order_id) { goto YJxJi; E1sxD: $time = date("\x48\72\x69\72\163", $timeout - time()); goto vQiux; EbU3Z: k3rxL: goto m4A0z; aCl8U: s4ZuU: goto d9znr; opYma: return array(sprintf("\x3c\141\40\143\x6c\141\x73\x73\x3d\x22\x70\151\143\153\40\163\x25\163\x22\40\164\141\x72\x67\x65\x74\x3d\42\x5f\142\x6c\141\x6e\x6b\x22\x20\164\x69\164\x6c\x65\x3d\x22\x25\x73\x22\x20\150\162\145\146\x3d\42\x25\x73\42\x20\144\141\164\x61\x2d\x69\x6e\x66\x6f\75\x22\x50\x69\143\x6b\x22\76\45\163\x3c\57\141\x3e", $tracking->code, $tracking->date . "\40" . $tracking->location, "\150\164\164\160\163\x3a\57\x2f\167\167\x77\56\x70\151\x63\153\x70\x61\x63\153\x70\157\156\x74\x2e\150\165\x2f\x63\x73\x6f\155\x61\x67\153\145\x72\145\x73\x6f\57\x3f\x62\x63\x3d" . $pn, $tracking->event), $tracking->code); goto ou2q0; klKQP: set_transient("\160\x6f\156\164\x5f\164\x61\x63\153\151\x6e\147\137" . $pn, $tracking, 15 * MINUTE_IN_SECONDS); goto MpdtD; G99B4: if (!is_wp_error($rin)) { goto s4ZuU; } goto d8_dV; Nlwvp: $timeout = get_option("\137\x74\162\x61\x6e\163\x69\145\156\x74\x5f\164\151\155\x65\157\165\164\x5f" . "\160\157\156\164\137\x74\x61\143\x6b\151\156\147\x5f" . $pn); goto E1sxD; d8_dV: WC_Pont::log("\124\162\x61\x63\153\151\x6e\147\x20\163\x70\162\x69\156\x74\x65\162" . "\x20\162\x65\163\160\157\x6e\163\145\x3a\x20" . json_encode($rin), "\145\x72\162\157\162"); goto vKC4O; MpdtD: return array(sprintf("\74\141\x20\143\154\x61\x73\163\75\x22\x70\151\143\153\x20\x73\45\x73\42\40\x74\x61\162\147\145\x74\75\x22\137\x62\154\141\156\x6b\42\x20\164\x69\164\154\145\75\x22\45\163\x22\40\x68\162\145\146\x3d\42\x25\x73\x22\x20\x64\141\x74\141\55\151\x6e\146\x6f\75\42\120\151\x63\x6b\x22\76\45\x73\x3c\x2f\141\76", $tracking->code, $tracking->date . "\40" . $tracking->location, "\x68\164\x74\160\x73\x3a\57\x2f\x77\167\x77\56\x70\151\x63\x6b\x70\x61\143\x6b\160\157\x6e\164\x2e\x68\165\x2f\143\x73\157\x6d\141\x67\153\x65\162\x65\x73\157\x2f\77\x62\x63\x3d" . $pn, $tracking->event), $tracking->code); goto y5urY; ZzsBj: update_post_meta($order_id, "\x5f\x74\x72\141\x63\x6b\x69\x6e\x67\x5f\144\x61\164\x61", $tracking); goto opYma; AKuKk: if (!$tracking) { goto k3rxL; } goto Nlwvp; wNwLo: $tracking = (object) ["\144\141\x74\145" => date("\131\x2d\155\55\x64\x20\x48\x3a\x69", strtotime($data->CreatedDate)), "\143\x6f\144\145" => $data->ActualStatus, "\143\x61\164\x65\147\x6f\x72\171" => '', "\145\x76\x65\156\164" => $data->ActualStatusDescription, "\x6c\x6f\x63\x61\x74\151\x6f\156" => $data->ActualStatusAdditionalDescription]; goto FAXRj; FAXRj: set_transient("\160\157\x6e\x74\137\164\141\x63\x6b\151\x6e\147\137" . $pn, $tracking, 1 * HOUR_IN_SECONDS); goto ZzsBj; YJxJi: $tracking = get_transient("\x70\x6f\156\164\137\x74\x61\143\153\151\156\x67\137" . $pn); goto AKuKk; SA4OK: return array(sprintf("\x3c\x61\x20\143\x6c\141\x73\163\x3d\42\x70\151\x63\153\x20\x73\45\163\42\x20\x74\x61\x72\147\x65\x74\75\42\137\x62\154\141\x6e\x6b\42\x20\x74\x69\164\154\x65\x3d\42\x25\163\x22\40\x68\162\145\x66\75\x22\x25\163\x22\x20\x64\x61\x74\141\55\151\156\146\157\x3d\x22\x54\162\141\x6e\x73\42\76\x25\x73\74\57\141\76", $tracking->code, $tracking->date . "\x20" . $tracking->location, "\150\x74\x74\x70\163\72\x2f\57\x77\x77\x77\x2e\160\151\x63\153\x70\x61\x63\x6b\x70\x6f\x6e\x74\x2e\150\x75\57\x63\163\157\x6d\141\x67\x6b\145\x72\145\163\157\57\x3f\142\143\75" . $pn, $tracking->event), $tracking->code); goto EbU3Z; PHCBR: PcEtQ: goto VfTQI; Ymq3R: if (!isset($data->ActualStatus)) { goto PcEtQ; } goto wNwLo; O5_79: $rin = wp_remote_get($trkURL); goto G99B4; vKC4O: return array(sprintf("\x3c\x61\40\143\154\141\x73\163\x3d\42\x70\x69\x63\153\40\x73\x25\163\42\40\x74\141\162\x67\x65\x74\75\x22\x5f\142\154\x61\156\x6b\x22\40\164\151\x74\154\x65\75\x22\45\163\x22\40\150\162\145\x66\x3d\x22\x25\163\42\40\76\x25\163\x3c\x2f\x61\x3e", 0, date("\x59\55\155\x2d\144\x20\x48\72\x69"), "\x68\x74\x74\x70\x73\72\57\x2f\x77\167\167\56\160\151\x63\153\160\141\143\153\x70\x6f\x6e\164\x2e\x68\165\x2f\143\163\x6f\x6d\x61\x67\x6b\145\162\145\x73\x6f\57\77\x62\143\75" . $pn, __("\x53\x7a\157\x6c\147\303\xa1\x6c\x74\141\x74\xc3\263\151\x20\x68\x69\x62\x61", "\x77\143\55\x70\x6f\x6e\x74")), 0); goto aCl8U; VfTQI: $tracking = (object) ["\x64\x61\164\145" => "\106\162\x69\163\163\303\xad\x74\x76\145\x3a\40" . date("\x59\55\155\x2d\x64\x20\x48\72\151", current_time("\x74\x69\155\145\x73\164\141\x6d\160")), "\143\x6f\x64\x65" => 0, "\143\141\164\x65\x67\x6f\162\x79" => '', "\145\166\x65\156\x74" => __("\116\x69\156\143\163\40\x61\144\x61\164", "\x77\x63\x2d\x70\157\156\164"), "\x6c\157\x63\x61\x74\x69\157\156" => '']; goto klKQP; d9znr: $data = json_decode($rin["\x62\157\x64\x79"]); goto Ymq3R; ou2q0: goto v8TfJ; goto PHCBR; m4A0z: $trkURL = "\150\x74\x74\160\x73\x3a\x2f\x2f\x70\x6f\162\x74\x61\x6c\x2e\x70\x69\143\153\x70\x61\x63\x6b\x70\x6f\156\164\x2e\x68\x75\x2f\102\x45\x2f\x61\x70\x69\57\x50\x61\x72\143\x65\154\57\123\164\x61\164\165\163\57" . $pn; goto O5_79; vQiux: WC_Pont::log("\123\160\x72\x69\156\164\x65\162\40\164\x72\x61\143\x6b\x69\156\x67\40\144\141\x74\141\40\142\x79\x20\x74\162\141\x6e\163\151\145\156\x74\56\x20\124\x72\x61\143\x6b\x69\x6e\x67\x20\x6e\x75\155\142\145\x72\72\x20" . $pn . "\x4f\162\144\x65\x72\40\x69\144\x3a\40" . $order_id . "\40\164\x69\155\145\x3a\40" . $time, "\151\156\x66\x6f"); goto SA4OK; y5urY: v8TfJ: goto epjUn; epjUn: }
