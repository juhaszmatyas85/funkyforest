<?php
/*
 * @version $Id: Pont V5.0.0 2018-06-22 szathmari.hu $
 * @copyright Copyright (C) 2018 szathmari.hu - All rights reserved.
 * @license commerical
 * @url http://szathmari.hu
*/
 class WC_Pont_AutoUpdate { private $current_version; private $update_path; private $plugin_slug; private $license_key; private $host; private $slug; public function __construct($current_version, $update_path, $plugin_slug, $license_key = '', $host = '') { goto o0rNz; WyBYe: $this->license_key = $license_key; goto UPHrF; bjHRz: add_filter("\x70\x6c\165\x67\151\156\163\x5f\x61\160\151", array(&$this, "\143\150\145\x63\153\x5f\151\x6e\146\x6f"), 10, 3); goto nUgUP; f95BA: list($t1, $t2) = explode("\57", $plugin_slug); goto BdVHo; MC1ss: $this->current_version = $current_version; goto ibVPM; gItZK: $this->host = $_SERVER["\x48\124\124\120\137\x48\117\x53\x54"]; goto WyBYe; TFojj: add_filter("\x70\162\145\x5f\x73\x65\164\137\163\x69\x74\x65\137\164\x72\141\156\x73\151\145\156\x74\137\165\160\144\x61\164\x65\x5f\160\x6c\165\147\x69\x6e\163", array(&$this, "\x63\150\x65\x63\x6b\x5f\165\160\144\x61\164\x65")); goto bjHRz; BdVHo: $this->slug = str_replace("\x2e\x70\150\160", '', $t2); goto TFojj; UPHrF: $this->plugin_slug = $plugin_slug; goto f95BA; o0rNz: add_filter("\x75\160\147\x72\x61\144\x65\x72\137\160\162\x65\x5f\144\157\x77\x6e\x6c\x6f\141\x64", array(&$this, "\165\x70\147\x72\141\x64\x65\162\137\160\x72\x65\137\x64\x6f\167\156\x6c\x6f\141\x64"), 10, 3); goto MC1ss; ibVPM: $this->update_path = $update_path; goto gItZK; nUgUP: } public function check_update($transient) { goto ie1oY; ClBBt: $transient->response[$this->plugin_slug] = $obj; goto Vp5Wf; nonFJ: $obj->slug = $this->slug; goto JMn7V; Vp5Wf: kA9Rb: goto eAZ7M; nXdzh: if (!version_compare($this->current_version, $remote_version->new_version, "\74")) { goto kA9Rb; } goto y3NqG; E4ze1: $obj->url = $remote_version->url; goto U3mhy; neDGy: $remote_version = $this->getRemote_version(); goto nXdzh; QHpdN: $obj->icons = $remote_version->icons; goto ClBBt; D6ceu: $obj->upgrade_notice = $remote_version->upgrade_notice; goto kciLz; JMn7V: $obj->new_version = $remote_version->new_version; goto t0Sts; OtoBB: $obj->tested = $remote_version->tested; goto QHpdN; t0Sts: $obj->homepage = $remote_version->homepage; goto E4ze1; UICwA: Z2IPX: goto neDGy; U3mhy: $obj->plugin = $this->plugin_slug; goto D6ceu; kciLz: $obj->package = $remote_version->package; goto OtoBB; eAZ7M: return $transient; goto hQyOr; ie1oY: if (!empty($transient->checked)) { goto Z2IPX; } goto jQ6cX; jQ6cX: return $transient; goto UICwA; y3NqG: $obj = new stdClass(); goto nonFJ; hQyOr: } public function check_info($false, $action, $arg) { goto Le863; WNAYa: return $false; goto TvUg6; wxFTI: tf1zz: goto WNAYa; wO84r: return $information; goto wxFTI; i2qha: $information = $this->getRemote_information(); goto wO84r; Le863: if (!(isset($arg->slug) && $arg->slug === $this->slug)) { goto tf1zz; } goto i2qha; TvUg6: } public function getRemote_version() { goto tfhBT; k4PWk: return unserialize($request["\142\x6f\144\x79"]); goto Idn93; yNjNX: if (!(!is_wp_error($request) || wp_remote_retrieve_response_code($request) === 200)) { goto iIZ8m; } goto k4PWk; tfhBT: $params = array("\142\157\x64\171" => array("\x61\143\x74\151\x6f\x6e" => "\166\145\x72\163\x69\157\156", "\150\x6f\163\164" => $this->host, "\154\x69\x63\x65\156\163\145\137\153\145\x79" => $this->license_key)); goto JFmjv; Idn93: iIZ8m: goto tchpO; JFmjv: $request = wp_remote_post($this->update_path, $params); goto yNjNX; tchpO: return false; goto PPePL; PPePL: } public function getRemote_information() { goto YBuFN; smG1F: if (!(!is_wp_error($request) || wp_remote_retrieve_response_code($request) === 200)) { goto ndje8; } goto fERiE; ejTqX: return false; goto sezW0; Z0avC: ndje8: goto ejTqX; YBuFN: $params = array("\142\x6f\144\171" => array("\141\143\164\151\157\x6e" => "\x69\x6e\146\x6f", "\x68\157\x73\x74" => $this->host, "\154\151\x63\145\x6e\x73\x65\137\153\145\x79" => $this->license_key)); goto xOLA6; fERiE: return unserialize($request["\x62\157\144\x79"]); goto Z0avC; xOLA6: $request = wp_remote_post($this->update_path, $params); goto smG1F; sezW0: } public function getRemote_license() { goto BTrBm; BTrBm: $params = array("\x62\157\144\x79" => array("\141\x63\x74\151\157\x6e" => "\154\x69\x63\x65\156\x73\145", "\x68\157\163\164" => $this->host, "\154\x69\143\145\156\x73\x65\x5f\153\145\171" => $this->license_key)); goto QK7er; Xvjq2: if (!(!is_wp_error($request) || wp_remote_retrieve_response_code($request) === 200)) { goto eQ7pe; } goto SsdHT; ismH8: eQ7pe: goto YyU2w; SsdHT: return unserialize($request["\x62\157\144\171"]); goto ismH8; YyU2w: return false; goto elnX8; QK7er: $request = wp_remote_post($this->update_path, $params); goto Xvjq2; elnX8: } public function upgrader_pre_download($reply, $package, $upgrader) { goto n_Hhk; F7b_t: D2y_G: goto qshcs; DFBRw: return $download_file; goto jhK60; DFW_r: DMyIp: goto EUqqM; LBTfu: return new WP_Error("\x77\x63\x5f\160\x6f\x6e\x74\x5f\144\x6f\167\x6e\154\157\141\x64\137\x65\x72\162\157\162", ''); goto IQsG1; Gftk1: $upgrader->skin->result = new WP_Error("\167\143\137\x70\157\156\164\x5f\x64\x6f\167\156\154\157\x61\x64\137\145\x72\162\157\162", $error_msg); goto LBTfu; qshcs: if (!is_wp_error($download_file)) { goto lfQpO; } goto pFSP2; xKxYw: $download_file = download_url($package); goto bgfia; CbPPb: $error_code = $download_file->get_error_message(); goto w6ZUL; gkEaf: NBB3k: goto s33Cv; Q3uUl: $res = $upgrader->fs_connect(array(WP_CONTENT_DIR)); goto KVT6e; SYQxZ: $upgrader->strings["\167\x63\x5f\x70\157\x6e\164\x5f\144\x6f\x77\x6e\154\157\141\x64"] = __("\116\145\x6d\40\164\165\144\157\155\40\x66\162\x69\163\163\xc3\xad\x74\x65\x6e\x69\x20\141\40\120\157\156\164\x20\x73\x7a\303\241\x6c\154\xc3\255\x74\303\xa1\163\151\40\160\154\x75\147\x69\156\x74\x2e\x2e\56", "\167\143\x5f\x70\157\156\x74"); goto Zld7i; NOx4E: $upgrader->skin->feedback("\167\143\137\160\x6f\156\x74\137\144\x6f\167\156\x6c\157\x61\144"); goto Q3uUl; BlTqV: return new WP_Error("\167\143\x5f\x70\x6f\x6e\x74\137\144\157\167\x6e\154\x6f\141\144\137\145\162\x72\157\162", $error_msg); goto DFW_r; KVT6e: if ($res) { goto WqLBg; } goto rUxqz; lbnAC: $upgrader->strings["\x77\143\137\160\x6f\x6e\164\x5f\x65\x72\x72\x6f\x72"] = "\74\144\151\166\x20\x63\154\x61\x73\x73\x3d\42\x65\162\162\157\162\x20\151\x6e\154\151\156\x65\42\x3e\74\x70\76\74\x73\x74\x72\157\156\147\x3e" . $error_msg . "\x3c\57\163\x74\x72\157\156\147\x3e\x3c\57\160\76\74\x2f\144\151\166\76"; goto zWOg2; EUqqM: lfQpO: goto DFBRw; aXcMb: $upgrader->strings["\167\143\137\x70\x6f\x6e\x74\x5f\x64\157\x77\156\154\x6f\141\x64"] = __("\x50\157\x6e\164\40\163\172\xc3\xa1\x6c\x6c\xc3\255\164\xc3\241\x73\x69\x20\160\x6c\165\147\x69\156\40\x6c\145\x74\xc3\266\x6c\x74\303\xa9\x73\145\x2e\x2e\x2e", "\x77\143\137\160\157\156\x74"); goto NOx4E; Og3GM: E4l0U: goto BlTqV; l0bFM: add_filter("\150\164\x74\160\x5f\x72\145\163\160\x6f\x6e\163\x65", array(&$this, "\141\154\164\145\x72\137\x75\x70\144\141\164\145\x5f\x6d\x65\x73\x73\141\147\x65"), 10, 3); goto xKxYw; IQsG1: goto DMyIp; goto Og3GM; apcV2: switch ($error_code) { case 500: case 503: $error = __("\123\x61\152\156\x6f\x73\40\x61\40\x6b\151\x73\172\157\154\147\303\xa1\x6c\303\263\40\156\145\155\x20\155\305\xb1\153\303\266\144\x69\x6b\56\x20\x50\x72\303\263\142\xc3\241\x6c\144\40\153\303\251\x73\305\x91\142\142\x2e", "\x77\x63\137\x70\157\156\x74"); goto CxISZ; case 609: $error_msg = $error_msg . "\40\x3a\50"; default: goto XAu7i; wCNhF: BBogr: goto pXtcZ; dQAC8: $error .= "\x3c\x62\x72\76" . $message; goto wCNhF; UiCmL: if (!$message) { goto BBogr; } goto dQAC8; XAu7i: $error = __("\x49\163\x6d\145\x72\x65\x74\154\145\x6e\40\x68\x69\142\x61\x20\x6c\xc3\251\x70\x65\x74\x74\40\x66\x65\x6c\x20\x61\40\x50\157\156\x74\40\x73\172\303\xa1\154\154\xc3\xad\x74\303\241\x73\151\x20\x70\x6c\x75\x67\151\x6e\40\164\145\x6c\x65\x70\xc3\255\x74\xc3\251\x73\x65\x20\x73\x6f\x72\303\xa1\156\x21", "\167\143\x5f\x70\157\156\x74"); goto UiCmL; pXtcZ: goto CxISZ; goto Cjp6s; Cjp6s: } goto gkEaf; n_Hhk: if (!(isset($upgrader->skin->plugin_info) && $upgrader->skin->plugin_info["\116\141\155\x65"] === "\120\x6f\x6e\164\x20\x73\x68\x69\160\160\151\x6e\x67\x20\146\x6f\162\x20\127\x6f\x6f\x63\x6f\155\155\x65\x72\x63\x65")) { goto jEEHP; } goto aXcMb; s33Cv: CxISZ: goto XtPYD; jhK60: jEEHP: goto Rs32_; bgfia: remove_filter("\x68\164\x74\160\x5f\162\x65\x73\160\x6f\x6e\x73\145", array(&$this, "\x61\x6c\164\145\162\137\165\160\x64\141\164\145\x5f\x6d\x65\x73\x73\x61\147\145"), 10, 3); goto ZZvbx; UqQdE: WqLBg: goto l0bFM; w6ZUL: $error_msg = $this->update_error($error_code, __("\110\151\142\141\x20\x74\xc3\266\x72\x74\xc3\251\x6e\x74\x20\141\x20\x50\x6f\x6e\164\40\163\x7a\xc3\xa1\x6c\154\303\xad\164\xc3\xa1\163\x69\x20\x70\x6c\x75\147\151\156\x20\x6c\145\164\303\xb6\x6c\164\xc3\xa9\163\x65\40\x6b\xc3\xb6\172\x62\x65\156\x2e", "\x77\x63\137\x70\x6f\156\x74")); goto apcV2; Rs32_: return $reply; goto mkIjh; GluV0: return $reply; goto F7b_t; zWOg2: $upgrader->skin->feedback("\x77\143\137\x70\x6f\156\164\x5f\145\x72\x72\157\162"); goto Gftk1; rUxqz: return new WP_Error("\x66\x73\x5f\x75\156\x61\166\x61\151\154\x61\x62\154\145", $upgrader->strings["\x66\163\x5f\x75\x6e\x61\166\x61\x69\x6c\141\x62\154\x65"]); goto UqQdE; XtPYD: if (is_a($upgrader->skin, "\102\165\154\153\137\x50\x6c\165\x67\151\156\x5f\x55\x70\x67\x72\141\144\145\x72\x5f\123\x6b\151\156")) { goto E4l0U; } goto lbnAC; Zld7i: $upgrader->skin->feedback("\167\143\137\160\157\x6e\x74\x5f\144\157\x77\x6e\x6c\x6f\141\144"); goto GluV0; pFSP2: $upgrader->strings["\x77\x63\x5f\x70\157\156\164\137\144\157\167\156\154\157\x61\144\x5f\x65\162\162\157\x72"] = __("\101\x20\120\x6f\156\164\x20\163\x7a\xc3\241\154\154\xc3\255\164\xc3\241\x73\x69\40\x70\x6c\165\x67\x69\x6e\x20\x6c\x65\164\303\266\154\164\303\251\163\x65\40\x6d\x65\x67\150\x69\303\xba\x73\165\x6c\164\x2e\40\110\x69\142\141\153\xc3\263\x64\x3a\40" . $download_file->get_error_message(), "\167\143\x5f\x70\157\x6e\x74"); goto oT8NY; ZZvbx: if (!($this->is_zip($download_file) === false)) { goto D2y_G; } goto SYQxZ; oT8NY: $upgrader->skin->feedback("\167\x63\x5f\x70\x6f\156\x74\x5f\144\x6f\x77\x6e\x6c\x6f\141\x64\x5f\x65\x72\162\157\162"); goto CbPPb; mkIjh: } public function alter_update_message($response, $r, $url) { goto GKUII; k8ZX7: return $response; goto P6Q4d; bK6uR: $response["\162\x65\163\x70\x6f\156\x73\x65"]["\x6d\145\163\x73\141\x67\x65"] = $code; goto k8ZX7; GKUII: $code = wp_remote_retrieve_response_code($response); goto bK6uR; P6Q4d: } public function is_zip($f) { goto pBYMM; uVOLs: switch ($res) { case ZipArchive::ER_NOZIP: return false; case ZipArchive::ER_INCONS: return false; case ZipArchive::ER_CRC: return false; default: return ture; } goto Gu_cE; pBYMM: $zip = new ZipArchive(); goto VcKCn; VcKCn: $res = $zip->open($f, ZipArchive::CHECKCONS); goto uVOLs; oZdHt: LmYXn: goto Sftmv; Gu_cE: IG1m5: goto oZdHt; Sftmv: } public function update_error($error_code, $print = null) { goto yO0n0; XBk3W: $error_code = $error_code->get_error_code(); goto CcPaI; vomrW: $print = $error_code->get_error_message(); goto XBk3W; CcPaI: HVj1Y: goto m8kvw; HeHNh: fL5eY: goto A4L6b; hqQqS: return $error_msg; goto LXH9_; yO0n0: if (!is_wp_error($error_code)) { goto HVj1Y; } goto vomrW; m8kvw: switch ($error_code) { case 608: $error_msg = sprintf(__("\xc3\x81\x6c\154\xc3\255\x74\163\144\40\142\x65\x20\x61\40\164\145\154\x65\x70\xc3\xad\164\303\251\x73\151\x20\153\165\154\143\163\157\164\40\141\40\45\163\x20\x6f\154\x64\x61\154\157\156\x2e", "\x77\x63\137\x70\x6f\156\164"), "\74\141\40\x68\x72\145\146\75\x22" . admin_url("\x61\144\x6d\151\156\x2e\160\150\160\x3f\x70\x61\147\x65\75\x77\x63\55\x73\x65\164\x74\x69\x6e\x67\163\x26\164\x61\x62\x3d\x70\157\x6e\164") . "\x22\40\164\x61\x72\147\145\164\x3d\x22\x5f\x74\157\x70\x22\x3e" . __("\120\x6f\156\x74", "\x77\143\137\160\x6f\x6e\x74") . "\74\x2f\x61\76"); goto AcNfm; case 609: $error_msg .= "\x20" . sprintf(__("\114\x65\x6a\xc3\241\x72\x74\40\x61\x20\164\xc3\xa1\155\157\x67\x61\164\303\241\163\x69\40\151\144\xc5\x91\163\x7a\141\153\40\141\x20\x25\x73\x20\x6f\154\144\x61\x6c\157\156\x2e\40\45\x73", "\167\x63\x5f\160\x6f\x6e\x74"), $_SERVER["\110\124\x54\120\x5f\x48\x4f\123\x54"], "\x20\x3c\141\40\150\x72\145\x66\75\x22\150\164\x74\x70\x73\72\x2f\x2f\x73\x7a\141\164\150\x6d\141\x72\x69\56\150\165\57\167\157\162\144\160\x72\x65\163\x73\x2f\x31\65\x2d\160\x69\143\x6b\x2d\160\141\x63\x6b\x2d\x70\x6f\x6e\x74\55\x70\157\163\x74\x61\x2d\160\157\x6e\164\55\x67\154\x73\55\x63\163\x6f\x6d\x61\x67\160\x6f\x6e\x74\x2d\167\157\x6f\x63\x6f\x6d\155\x65\x72\143\145\55\x73\172\x61\x6c\x6c\151\164\x61\163\x69\x2d\155\157\144\x75\x6c\x22\x20\x74\x61\162\147\145\164\75\x22\137\142\x6c\x61\156\x6b\x22\76" . __("\102\305\221\x76\145\x62\142\x20\151\156\x66\x6f\162\x6d\303\241\143\x69\303\263", "\167\143\137\x70\157\156\x74") . "\x3c\57\x61\x3e"); goto AcNfm; default: $error_msg = $print ? $print : __("\110\151\x62\x61\40\164\303\266\162\164\303\251\156\x74\x21", "\167\143\137\160\x6f\156\164") . "\40\x5b" . $error_code . "\135"; goto AcNfm; } goto HeHNh; A4L6b: AcNfm: goto hqQqS; LXH9_: } }
