<?php
/*
 * @version $Id: Pont V7.3 2021-05-01 szathmari.hu $
 * @copyright Copyright (C) 2021 szathmari.hu - All rights reserved.
 * @license commerical
 * @url https://szathmari.hu
*/
 goto MVMBb; MVMBb: class gls { public $client; public $username; public $password; public $wsdl; function send() { goto Ef1ml; pmbwA: $request = array("\160\x72\x69\156\164\x4c\141\142\x65\x6c\x73\122\145\x71\165\145\x73\x74" => $this->request); goto tFpFi; Ef1ml: $parcels[] = $this->csomag; goto VAZc3; tFpFi: $response = $this->client->PrintLabels($request); goto PM69B; VAZc3: $this->request->ParcelList = $parcels; goto pmbwA; PM69B: if (!($response != null && count((array) $response->PrintLabelsResult->PrintLabelsError) == 0 && $response->PrintLabelsResult->Labels != '')) { goto uvaF0; } goto QY44D; QY44D: file_put_contents("\x70\x68\160\137\x73\x6f\141\x70\137\143\154\x69\145\x6e\x74\x5f\120\x72\x69\156\x74\x4c\x61\x62\145\154\x73\56\x70\x64\146", $response->PrintLabelsResult->Labels); goto y3hH1; y3hH1: uvaF0: goto mixHc; mixHc: } function init() { goto Igp21; s6ty1: WC_Pont::log("\107\114\x53\11\151\x6e\151\x74" . "\40\167\163\x64\154\x20\160\x61\x74\150\x3a\x20" . $this->wsdl, "\x69\156\x66\x6f"); goto h1AUw; Igp21: $soapPath = array("\x48\125" => "\x6d\x79\147\x6c\x73\x2e\x68\x75\x2f\120\141\162\143\x65\x6c\x53\x65\162\166\151\143\x65\x2e\x73\166\x63\x3f\163\151\x6e\x67\x6c\x65\x57\x73\x64\154", "\122\x4f" => "\155\x79\x67\154\163\56\x72\x6f\x2f\x50\x61\x72\143\145\154\x53\x65\x72\x76\x69\143\145\56\163\x76\x63\77\x73\151\156\x67\x6c\x65\x57\163\x64\154", "\123\x4b" => "\155\x79\x67\154\x73\56\x73\x6b\57\120\141\162\143\x65\154\x53\145\x72\x76\x69\143\x65\x2e\163\x76\143\x3f\x73\151\156\x67\x6c\x65\x57\163\x64\x6c", "\103\132" => "\155\171\x67\x6c\x73\56\x63\172\x2f\120\x61\x72\x63\x65\x6c\123\x65\x72\x76\151\143\145\56\163\x76\143\x3f\x73\151\156\147\154\145\x57\x73\x64\x6c", "\x53\111" => "\155\x79\147\154\x73\x2e\x73\x69\x2f\x50\x61\162\143\145\x6c\x53\x65\162\x76\x69\143\x65\x2e\x73\x76\143\x3f\x73\x69\156\147\154\145\x57\x73\x64\x6c", "\x48\122" => "\x6d\x79\x67\x6c\x73\x2e\x68\x72\x2f\120\x61\162\143\145\154\x53\x65\162\166\x69\143\145\x2e\x73\166\143\77\x73\x69\x6e\x67\x6c\145\127\163\144\x6c"); goto RFDKi; mi2Gp: $soapOptions = array("\163\157\x61\x70\137\166\x65\162\x73\151\x6f\156" => "\x53\117\x41\x50\137\61\x5f\x31", "\x73\x74\x72\x65\141\155\x5f\143\x6f\156\x74\x65\x78\x74" => stream_context_create(array("\163\163\x6c" => array("\143\141\x66\151\154\145" => __DIR__ . "\57\147\154\x73\56\160\145\155")))); goto N5x1n; JukTC: $_HTTP = get_option("\x77\143\x5f\x70\157\x6e\164\x5f\x67\154\x73\137\164\145\x73\x74") === "\171\145\163" ? "\150\x74\x74\x70\x73\x3a\57\x2f\x61\160\151\x2e\164\x65\163\164\56" : "\150\164\164\160\163\72\x2f\57\x61\x70\151\x2e"; goto QK5qZ; N5x1n: $this->client = new SoapClient($this->wsdl, $soapOptions); goto s6ty1; SVl2w: $this->password = hash("\163\x68\x61\65\61\62", get_option("\x77\x63\137\x70\x6f\x6e\x74\137\147\154\x73\x5f\x70\141\163\163\x77\x6f\x72\144"), true); goto JukTC; QK5qZ: $this->wsdl = $_HTTP . $soapPath[$soapCountry]; goto mi2Gp; a0OCS: $this->username = get_option("\167\x63\137\160\157\156\164\137\x67\x6c\x73\137\x75\x73\145\162\x6e\x61\x6d\x65"); goto SVl2w; Re36e: $this->client_number = get_option("\167\x63\137\x70\157\156\x74\x5f\147\x6c\x73\137\x73\145\x6e\144\x65\162\x69\x64"); goto a0OCS; RFDKi: $soapCountry = get_option("\x77\x63\137\x70\x6f\156\x74\137\147\154\163\137\163\x65\x6e\x64\x65\162\137\x63\x6f\x75\156\164\162\171", "\x48\125"); goto Re36e; h1AUw: } function setDOP($order, $order_id, $pont, $parcel) { goto KHN3d; j0uQy: return $parcel; goto A2uSL; eJPiH: $parcel->ServiceList = [(object) ["\x43\x6f\144\x65" => "\120\x53\104", "\x50\123\104\x50\x61\162\x61\x6d\145\164\145\162" => (object) ["\123\164\162\x69\156\x67\x56\141\154\x75\x65" => $pont[2]]]]; goto Qis2U; A2uSL: AdshJ: goto LO3RH; pcIEu: $parcel->DeliveryAddress->ZipCode = $p[$id]["\x7a\151\160"]; goto eJPiH; CCkCr: return false; goto wffvh; iLstC: $parcel->DeliveryAddress->City = $p[$id]["\x63\x69\x74\x79"]; goto pcIEu; Qis2U: $parcel->DeliveryAddress->CountryIsoCode = "\x48\x55"; goto j0uQy; ZFgGi: $parcel->DeliveryAddress->HouseNumberInfo = $order->get_shipping_address_2(); goto iLstC; lE3YT: $parcel->DeliveryAddress->Street = $p[$id]["\x61\x64\144\162\x65\163\163"]; goto ZFgGi; mU45v: $id = array_search($pont[2], array_column($p, "\151\144")); goto kjSd2; EoCY7: if (!is_array($p[$id])) { goto AdshJ; } goto nlLXx; kjSd2: if (!($id === false)) { goto xhNtP; } goto CCkCr; wffvh: xhNtP: goto EoCY7; nlLXx: $parcel->DeliveryAddress->Name = $p[$id]["\156\x61\x6d\145"]; goto lE3YT; KHN3d: $p = json_decode(file_get_contents(WC_Pont::$plugin_path . "\147\x6c\x73\160\157\156\x74\x2e\152\x73\157\156"), true); goto mU45v; LO3RH: } } goto TufhF; TufhF: function exportGLS($order_ids) { goto dHguN; UxDLJ: if (is_array($error)) { goto qXRgK; } goto Jeq_W; W5ZXB: goto vQGkK; goto lcoCc; F7aMQ: fNyR_: goto ODBUk; l0dKH: oxD_m: goto SD0_O; IjMFo: foreach ($order_ids as $order_id) { goto C_g4j; wYH6X: $parcel = $gls->setDOP($order, $order_id, $p, $parcel); goto EMSTq; UYAZr: $parcel->ServiceList[] = (object) ["\103\x6f\144\145" => "\106\104\x53", "\106\x44\x53\120\141\162\x61\155\x65\x74\x65\162" => (object) ["\x56\141\154\x75\145" => $order->get_billing_email()]]; goto e2OvD; lqQEq: $parcels[] = $parcel; goto oiPV0; ML1tl: FInAe: goto ZKJKi; VlETZ: WC_Pont::st_array("\160\x6f\156\x74\137\145\162\x72\x6f\162\x73", $order->get_order_number(), __("\122\x65\156\144\145\x6c\303\xa9\163\x20\156\x65\x6d\x20\153\x65\162\303\274\x6c\164\40\164\x6f\x76\xc3\241\142\142\303\255\164\xc3\xa1\x73\x72\141\x2c\40\x73\172\145\x6d\xc3\xa9\154\171\x65\163\x20\xc3\241\164\166\303\xa9\164\145\154\154\145\x6c\40\153\303\251\x72\x74\x65", "\167\x63\55\160\157\x6e\x74")); goto aBXdt; eYFPh: if (!(strpos($sMethod["\155\x65\164\x68\x6f\144\x5f\151\144"], "\x6c\157\x63\x61\x6c\x5f\x70\151\x63\x6b\165\160") !== false)) { goto zxOkq; } goto VlETZ; JXVjc: $parcel->DeliveryAddress->ZipCode = $order->get_shipping_postcode(); goto CYttP; C_g4j: $parcel = (object) ["\x43\x6c\151\145\156\x74\x4e\x75\155\x62\145\162" => $gls->client_number, "\x50\151\143\153\x75\x70\104\x61\x74\x65" => null, "\x43\x6f\x75\156\164" => 1, "\123\x65\x72\x76\x69\x63\145\x4c\151\163\x74" => [], "\104\x65\x6c\x69\x76\x65\162\x79\x41\x64\x64\x72\145\x73\163" => (object) [], "\120\151\143\153\165\160\x41\144\144\162\145\x73\163" => (object) [], "\x43\157\156\164\145\x6e\164" => '']; goto T99wa; E2wit: $parcel->Content = contentOnLabel($order, $contents, $template); goto g9fC6; NC6bL: yq5BM: goto GI_0q; jDPgQ: if (!("\x79\145\x73" == get_option("\x77\x63\x5f\x70\x6f\x6e\164\137\147\x6c\x73\x5f\x63\x73\61"))) { goto cTmRG; } goto yTJ2Z; vmhch: zxOkq: goto kY2U8; u3J6T: goto jS_is; goto NC6bL; qPybN: $parcel->PickupAddress->City = get_option("\x77\x63\137\x70\157\x6e\x74\137\147\x6c\163\137\163\x65\156\x64\x65\162\137\x63\151\164\x79"); goto WRX9t; sWKZz: $parcel->DeliveryAddress->City = $order->get_shipping_city(); goto JXVjc; Gm0W4: RlPDu: goto vyAG5; VB62H: $orig_ids[$order->get_order_number()] = $order_id; goto noLYF; oiPV0: gv9H1: goto lVOtW; JSnx7: $parcel->PickupDate = get_option("\167\143\x5f\160\x6f\156\164\137\x67\x6c\163\137\x70\165\x70\144\141\164\x65") ? $datetime->modify("\x2b\61\x20\x64\141\171")->format("\131\x2d\155\x2d\x64") : null; goto pU0cD; mWcpx: $contents = []; goto Vn5Nr; aBXdt: goto gv9H1; goto vmhch; vyAG5: jS_is: goto mWcpx; nb0Zt: if (strpos($p[1], WC_Pont::$carriers["\x67\x6c\x73"]) !== false) { goto cO0ZL; } goto LqUgD; oeva7: $parcel->CODAmount = $cod; goto nAxev; yTJ2Z: $parcel->ServiceList[] = (object) ["\103\x6f\x64\x65" => "\103\x53\61", "\103\x53\61\x50\141\162\141\x6d\x65\x74\x65\162" => (object) ["\x53\164\x72\151\x6e\x67\126\141\x6c\x75\x65" => $order->get_billing_phone()]]; goto Srpke; EPnYm: if (empty($template)) { goto UmJ2x; } goto E2wit; nAxev: $parcel->CODReference = $order->get_order_number(); goto wy69K; tAht5: ONuFQ: goto u3J6T; cWKvy: $parcel->DeliveryAddress->ContactName = $order->get_shipping_last_name() . "\x20" . $order->get_shipping_first_name(); goto ASWMB; uh2lF: do_action("\x77\157\x6f\x63\x6f\155\155\145\x72\x63\145\137" . "\167\143\x5f\x70\157\x6e\164" . "\137\x65\x78\160\x6f\x72\x74\137\155\x79\x67\154\x73\x5f\x64\x61\164\x61", $parcel, $order); goto lqQEq; Srpke: cTmRG: goto Zihtx; Vn5Nr: foreach ($order->get_items() as $key => $item) { goto QkWJM; s06d8: $contents[$key]["\x73\x6b\165"] = $_product->get_sku(); goto y8Ejc; y8Ejc: $contents[$key]["\x71\164\171"] = $item["\x71\164\x79"]; goto eNoAu; QkWJM: $_product = $item["\166\141\162\151\141\x74\151\157\156\x5f\151\x64"] ? new WC_Product_Variation($item["\x76\x61\162\151\141\164\x69\x6f\156\x5f\x69\x64"]) : ($product = new WC_Product($item["\160\162\157\x64\165\x63\x74\x5f\151\144"])); goto QTpvX; eNoAu: s_lAv: goto c06sS; QTpvX: $contents[$key]["\156\x61\155\x65"] = $_product->get_name(); goto s06d8; c06sS: } goto ML1tl; Zihtx: if (!("\x79\x65\x73" == get_option("\x77\x63\x5f\x70\157\x6e\x74\137\147\154\x73\x5f\163\x6d\62"))) { goto ONuFQ; } goto kjDFr; eJTcg: $sMethod = reset($sMethod); goto eYFPh; SPnuy: $parcel->PickupAddress->HouseNumberInfo = get_option("\x77\143\x5f\160\157\x6e\x74\x5f\x67\154\163\x5f\163\x65\156\144\145\162\x5f\x61\144\144\x72\x65\163\163\x5f\x32", ''); goto qPybN; jT6ot: goto RlPDu; goto OC3c7; tzAMf: WC_Pont::log("\x4d\x79\x47\114\123\x9\145\170\160\157\162\164" . "\40\x6f\x72\144\x65\162\40\x6e\165\155\142\145\x72\72\40" . $order->get_order_number() . "\x20\157\x72\144\x65\x72\x20\151\x64\x3a\40" . $order_id . "\x20\163\x65\x6e\144\x3a\x20" . json_encode($parcel, JSON_UNESCAPED_UNICODE), "\151\x6e\x66\157"); goto uh2lF; uDkEI: $parcel->DeliveryAddress->Name = $order->get_shipping_company() . "\40" . $order->get_shipping_last_name() . "\40" . $order->get_shipping_first_name(); goto NJTpq; kjDFr: $parcel->ServiceList[] = (object) ["\103\x6f\144\145" => "\x53\x4d\62", "\x53\x4d\x32\x50\141\162\141\155\145\x74\x65\x72" => (object) ["\x56\x61\154\x75\x65" => $order->get_billing_phone()]]; goto tAht5; WRX9t: $parcel->PickupAddress->ZipCode = get_option("\x77\x63\x5f\160\x6f\156\164\x5f\147\154\163\137\163\145\156\x64\x65\x72\137\x7a\x69\160\x63\x6f\144\145"); goto k17WX; NJTpq: $parcel->DeliveryAddress->Street = $order->get_shipping_address_1(); goto U3ZZa; CYttP: empty($order->get_shipping_country()) || ($parcel->DeliveryAddress->CountryIsoCode = $order->get_shipping_country()); goto T_uk8; ZP46H: WC_Pont::st_array("\x70\157\x6e\x74\x5f\x65\x72\x72\157\x72\x73", $order->get_order_number(), __("\xc3\201\x74\x76\x65\x76\305\x91\160\x6f\x6e\164\x20\156\x65\155\x20\x74\x61\154\xc3\241\x6c\x68\141\x74\xc3\xb3\x3a", "\167\x63\x2d\160\x6f\156\x74") . "\x20" . $p[2]); goto IGUdi; MNbgn: $parcel->PickupAddress->ContactName = get_option("\x77\x63\137\x70\x6f\156\164\137\x67\x6c\163\137\x73\x65\156\144\145\162\137\156\141\x6d\x65"); goto m2dIt; m2dIt: $parcel->PickupAddress->ContactPhone = get_option("\167\x63\137\160\157\x6e\164\x5f\147\154\163\x5f\163\x65\x6e\144\145\162\137\160\x68\x6f\x6e\x65"); goto Uy311; srazn: $datetime = new DateTime("\156\157\x77", new DateTimeZone($zone)); goto JSnx7; XX9WD: goto gv9H1; goto jT6ot; T_uk8: $sMethod = $order->get_shipping_methods(); goto eJTcg; m7lU1: if ($pont) { goto yq5BM; } goto jwhJl; k17WX: $parcel->PickupAddress->CountryIsoCode = get_option("\x77\143\x5f\x70\157\x6e\164\x5f\x67\154\x73\137\x73\145\156\x64\x65\x72\137\x63\157\165\x6e\164\x72\x79", "\110\125"); goto uDkEI; W1oUp: eJejq: goto Gm0W4; e2OvD: bG5as: goto jDPgQ; wy69K: $parcel->ClientReference = $order->get_order_number(); goto VB62H; jwhJl: if (!("\x79\x65\x73" == get_option("\167\x63\137\160\157\156\164\x5f\147\154\163\x5f\x66\x64\163"))) { goto bG5as; } goto UYAZr; ggGDt: $cod = $order->get_payment_method() == "\143\157\144" ? (float) $order->get_total() : 0; goto XH1w6; EMSTq: if (!(false === $parcel)) { goto eJejq; } goto ZP46H; noLYF: $template = get_option("\167\143\x5f\x70\157\156\x74\137\x63\157\x6e\164\145\x6e\x74\x5f\x74\x65\155\x70\154\141\164\x65"); goto EPnYm; XH1w6: $zone = "\122\117" == get_option("\167\143\x5f\160\x6f\x6e\164\x5f\147\x6c\163\137\x73\145\x6e\144\145\x72\137\143\x6f\x75\x6e\164\x72\x79", "\x48\x55") ? "\x45\165\162\x6f\x70\x65\57\x42\x75\x63\150\x61\x72\x65\163\x74" : "\x45\165\x72\157\160\145\x2f\102\165\x64\x61\x70\145\x73\x74"; goto srazn; OC3c7: cO0ZL: goto wYH6X; LqUgD: WC_Pont::st_array("\160\157\156\164\x5f\x65\x72\162\x6f\162\x73", $order->get_order_number(), sprintf(__("\x41\x20\x72\x65\x6e\x64\145\154\xc3\251\x73\164\40\45\x73\40\x73\x7a\xc3\xa1\154\154\303\xad\164\xc3\241\163\163\141\154\40\153\303\xa9\162\x74\145", "\167\x63\55\160\157\x6e\164"), $p[1])); goto XX9WD; AMAFE: $parcel->PickupAddress->Street = get_option("\x77\143\x5f\x70\x6f\x6e\x74\137\x67\x6c\163\x5f\163\145\x6e\x64\145\162\x5f\x61\144\144\x72\x65\163\x73"); goto SPnuy; Uy311: $parcel->PickupAddress->Name = get_option("\167\x63\137\x70\x6f\x6e\164\x5f\x67\154\163\x5f\x6e\141\155\145", get_bloginfo("\156\x61\155\x65")); goto AMAFE; T99wa: $order = wc_get_order($order_id); goto MNbgn; IGUdi: goto gv9H1; goto W1oUp; U3ZZa: $parcel->DeliveryAddress->HouseNumberInfo = $order->get_shipping_address_2(); goto sWKZz; ZKJKi: $parcel->DeliveryAddress->ContactEmail = $order->get_billing_email(); goto cWKvy; ASWMB: $parcel->DeliveryAddress->ContactPhone = $order->get_billing_phone(); goto ggGDt; pU0cD: $parcel->Count = empty(get_post_meta($order_id, "\x6c\x61\x62\145\x6c\163")) ? 1 : get_post_meta($order_id, "\154\x61\142\x65\x6c\x73"); goto oeva7; GI_0q: $p = explode("\174", get_post_meta($order_id, "\167\x63\x5f\x73\145\x6c\x65\143\x74\145\x64\x5f\160\157\156\x74", true)); goto nb0Zt; kY2U8: $pont = get_post_meta($order_id, "\x77\143\137\163\145\x6c\145\x63\x74\x65\x64\x5f\x70\x6f\156\x74", true); goto m7lU1; g9fC6: UmJ2x: goto tzAMf; lVOtW: } goto NFtmK; dHguN: $parcels = []; goto bt7AT; f_81l: $PrintLabelsInfoList = $response->PrintLabelsResult->PrintLabelsInfoList; goto eYD0F; kgRnA: goto JV4D2; goto PE7Fs; r3tFK: set_errors($error->ClientReferenceList->string, $error->ErrorDescription); goto hvit4; sLDjA: set_transient("\160\157\156\x74\x5f\143\x61\x72\x72\151\x65\x72", "\147\154\163", 5 * MINUTE_IN_SECONDS); goto Zx9qP; KazBj: $exp = get_transient("\160\x6f\x6e\x74\137\160\x63\x6c\163"); goto ZfL9f; Jeq_W: if ($error) { goto zn4MJ; } goto kgRnA; tbkX0: $params = ["\125\163\145\162\x6e\141\155\145" => $gls->username, "\120\141\x73\x73\167\x6f\x72\144" => $gls->password, "\x50\141\162\143\x65\x6c\114\x69\x73\164" => $parcels]; goto AvBtB; Aeqbv: try { $response = $gls->client->PrintLabels($request); } catch (Exception $e) { goto Yji5n; Yji5n: echo $e->getMessage(); goto XV68p; XV68p: WC_Pont::log("\115\x79\107\x4c\123\11\x53\x4f\x41\x50\40\x65\x72\162\157\162\x3a\x20" . $e->getMessage(), "\x65\162\162\x6f\162"); goto XBbhT; XBbhT: WC_Pont::st_array("\160\157\156\164\137\x65\x72\x72\157\x72\x73", $order->get_order_number(), __("\x48\x69\142\141", "\x77\x63\55\x70\x6f\156\x74") . "\x3a\x20" . $e->getMessage()); goto hzvJq; hzvJq: } goto XBfIw; dfPLM: goto JV4D2; goto DVjtL; gkxfu: lZb4m: goto W5ZXB; i6ZOG: $filename = date("\x59\55\155\55\x64\x5f\110\151\163") . "\x2e\x70\144\x66"; goto f_81l; ZfL9f: if ($exp) { goto qdPCM; } goto wk6Gu; TnSYO: foreach ($PrintLabelsInfoList->PrintLabelsInfo as $label) { goto Vr0pi; ONny2: mkCen: goto aPtJy; L7yGv: WC_Pont::update_order_status($orig_ids[$label->ClientReference]); goto ONny2; qKSV_: WC_Pont::st_array("\x70\157\156\x74\137\160\x64\x66", $orig_ids[$label->ClientReference], $filename); goto JCGjF; JCGjF: if (!(get_option("\167\x63\137\160\x6f\x6e\164\137\145\x78\160\157\x72\x74\x5f\155\x6f\x64\137\163\x74\x61\164\x75\x73") == "\x79\145\x73")) { goto mkCen; } goto L7yGv; aPtJy: lT5QJ: goto lG8o5; Vr0pi: WC_Pont::st_array("\160\157\x6e\164\137\160\143\x6c\x73", $orig_ids[$label->ClientReference], $label->ParcelNumber); goto qKSV_; lG8o5: } goto hgxy4; Zx9qP: WC_Pont::log("\115\171\x47\x4c\123\11\x50\x44\106\40\x66\151\154\145\x3a\x20" . $filename . "\x20\120\x43\x4c\x3a\40" . json_encode(get_transient("\x70\157\156\x74\x5f\x70\143\154\x73"), JSON_UNESCAPED_UNICODE), "\x69\x6e\x66\157"); goto U8o0D; ODBUk: $error = $response->PrintLabelsResult->PrintLabelsErrorList->ErrorInfo ?? null; goto UxDLJ; bt7AT: $gls = new gls(); goto H9fB3; MRPJZ: WC_Pont::st_array("\x70\x6f\x6e\x74\137\160\x63\154\163", $orig_ids[$PrintLabelsInfoList->PrintLabelsInfo->ClientReference], $PrintLabelsInfoList->PrintLabelsInfo->ParcelNumber); goto GCbkn; eYD0F: if (is_array($PrintLabelsInfoList->PrintLabelsInfo)) { goto y3PYh; } goto MRPJZ; zRucL: goto oxD_m; goto dm9je; DVjtL: zn4MJ: goto Rttgq; rSkGy: vQGkK: goto sLDjA; PE7Fs: qXRgK: goto mrg6R; JpCEt: WC_Pont::log("\x4d\171\x47\114\x53\x9\163\x65\x6e\x74" . "\x20\162\x65\x74\x75\x72\x6e\x3a" . json_encode($response->PrintLabelsResult->PrintLabelsInfoList, JSON_UNESCAPED_UNICODE), "\151\156\x66\157"); goto i6ZOG; NFtmK: n9XIq: goto tbkX0; XBfIw: if (!($response != null && $response->PrintLabelsResult->Labels != '' && (!isset($response->PrintLabelsResult->PrintLabelsError) || count((array) $response->PrintLabelsResult->PrintLabelsError) == 0))) { goto fNyR_; } goto JpCEt; H9fB3: $gls->init(); goto mDekq; GCbkn: WC_Pont::st_array("\x70\x6f\156\x74\x5f\160\144\x66", $orig_ids[$PrintLabelsInfoList->PrintLabelsInfo->ClientReference], $filename); goto L8DI2; wk6Gu: return 0; goto zRucL; L8DI2: if (!(get_option("\x77\x63\x5f\160\157\x6e\164\137\145\x78\160\157\162\164\x5f\x6d\157\144\137\163\x74\x61\x74\x75\163") == "\171\145\163")) { goto lZb4m; } goto muHUc; hgxy4: zgUfB: goto rSkGy; AvBtB: $request = ["\160\x72\x69\156\x74\114\141\x62\145\x6c\163\122\145\x71\x75\145\163\164" => $params]; goto Aeqbv; hvit4: JV4D2: goto KazBj; mTGpl: file_put_contents($filename, $response->PrintLabelsResult->Labels); goto F7aMQ; muHUc: WC_Pont::update_order_status($orig_ids[$PrintLabelsInfoList->PrintLabelsInfo->ClientReference]); goto gkxfu; dm9je: qdPCM: goto WXJvJ; mDekq: $orig_ids = []; goto IjMFo; WXJvJ: return count($exp); goto l0dKH; Rttgq: WC_Pont::log("\115\x79\x47\x4c\x53\x9\x65\162\x72\x6f\x72\40\143\157\x64\x65\x3a\x20" . $error->ErrorCode . "\40\55\x20" . $error->ErrorDescription, "\145\x72\x72\157\162"); goto r3tFK; mrg6R: foreach ($error as $k => $e) { goto LkJjx; l3OpO: Y3Q3_: goto V_dnF; rYT2H: set_errors($error->ClientReferenceList->string, $e->ErrorDescription); goto l3OpO; LkJjx: WC_Pont::log("\x4d\171\107\x4c\x53\11\x65\x72\162\157\162\x20\x63\157\144\x65\x3a\40" . $e->ErrorCode . "\40\x2d\40" . $e->ErrorDescription, "\x65\x72\162\x6f\x72"); goto rYT2H; V_dnF: } goto B4rBV; B4rBV: zfNwf: goto dfPLM; U8o0D: $filename = trailingslashit(WC_Pont::wc_pont_upload_dir()) . $filename; goto mTGpl; lcoCc: y3PYh: goto TnSYO; SD0_O: } goto IxITv; F9Vq9: function get_gls_tracking_info($pn, $order_id, $country = 0) { goto ka_H5; WVqPt: $tracking = (object) ["\144\141\164\x65" => date("\x59\55\x6d\55\x64\x20\110\72\x69", current_time("\x74\151\x6d\145\x73\x74\x61\x6d\x70")), "\x63\157\144\145" => 0, "\143\x61\x74\145\147\157\162\171" => '', "\145\x76\145\x6e\x74" => __("\x4e\x65\155\x20\164\141\154\xc3\xa1\x6c\150\141\164\303\xb3", "\x77\x63\x2d\160\157\156\164"), "\x6c\x6f\x63\141\x74\x69\157\x6e" => '', "\143\157\x75\x6e\x74\x72\x79" => $country]; goto z8HJI; vx2bX: $timeout = get_option("\137\164\162\x61\x6e\163\151\145\x6e\164\x5f\x74\151\x6d\x65\x6f\x75\164\x5f" . "\160\157\x6e\x74\x5f\164\x61\143\x6b\x69\x6e\147\137" . $pn); goto LNS_Q; pJAvj: $glsTrCode = (int) $in->Parcel->Statuses->Status->attributes()->StCode; goto sYhNO; LNS_Q: $time = date("\x48\72\151\72\163", $timeout - time()); goto q7emc; rYEkR: wRfBI: goto m3Rsk; HXSzI: update_post_meta($order_id, "\x5f\x74\162\141\x63\x6b\x69\156\147\x5f\144\141\164\141", $tracking); goto m0q6c; YXAE4: lAKKn: goto d1P4V; q7emc: WC_Pont::log("\x47\x4c\123\x20\x74\162\x61\x63\x6b\151\156\147\40\144\x61\x74\141\40\142\x79\x20\164\162\x61\156\163\x69\x65\156\x74\56\x20\x54\162\141\x63\153\x69\156\147\40\x6e\x75\155\142\145\x72\x3a\x20" . $pn . "\x4f\x72\144\145\x72\40\x69\x64\x3a\40" . $order_id . "\x20\x74\x69\x6d\x65\72\40" . $time, "\x69\156\146\157"); goto Q1H3W; BXq2K: set_transient("\160\x6f\156\164\137\x74\141\x63\153\151\x6e\x67\x5f" . $pn, $tracking, 60 * MINUTE_IN_SECONDS); goto HXSzI; z8HJI: set_transient("\160\157\156\x74\137\x74\141\x63\153\x69\x6e\x67\137" . $pn, $tracking, 15 * MINUTE_IN_SECONDS); goto VUx2F; m0q6c: return array(sprintf("\74\141\40\143\x6c\141\163\x73\75\x22\147\154\163\40\x73\x25\163\42\40\x74\141\x72\x67\145\164\x3d\42\x5f\x62\154\x61\156\x6b\42\x20\164\151\164\x6c\145\x3d\42\x25\163\42\40\x68\x72\x65\x66\75\42\45\x73\42\x20\144\x61\x74\141\55\x69\156\x66\x6f\x3d\x22\x47\114\x53\x22\x3e\x25\x73\74\x2f\141\76", $tracking->code, $tracking->date . "\x20" . $tracking->location, WC_Pont::$trk_urls["\x67\x6c\x73"][$country] . "\57\164\164\137\x70\x61\147\x65\x2e\x70\150\160\77\x74\x74\x5f\166\x61\154\x75\145\x3d" . $pn, WC_Pont::$glsTrCodes->{$glsTrCode}), $tracking->code); goto JuOHD; m3Rsk: $country = $country ?: get_option("\167\x63\x5f\x70\x6f\156\164\x5f\x67\154\163\x5f\x73\x65\156\144\x65\x72\x5f\143\157\165\156\x74\x72\x79", "\x48\x55"); goto UXc8a; d1P4V: $in = simplexml_load_string($rin["\142\157\144\x79"]); goto pJAvj; vcHJG: if (!($rin["\x62\157\144\171"] == "\x45\x72\x72\x23\60\x32\72\x20\x50\x61\162\143\145\x6c\40\156\165\155\142\x65\162\50\x73\x29\x20\x6e\x6f\x74\x20\146\x6f\165\x6e\x64\x20\151\x6e\40\144\x61\x74\x61\142\141\x73\145")) { goto lAKKn; } goto WVqPt; nJlAW: if (!$tracking) { goto wRfBI; } goto vx2bX; fXKPd: return array(sprintf("\74\x61\x20\143\x6c\141\x73\x73\75\x22\x67\x6c\x73\40\145\162\x72\x6f\x72\42\40\164\x61\x72\x67\x65\x74\75\x22\x5f\142\x6c\141\156\153\42\40\x68\x72\145\x66\x3d\42\45\x73\42\40\76\x25\163\74\x2f\x61\x3e", $trkURL, __("\x47\x4c\x53\40\x6e\x65\x6d\x20\x65\x6c\xc3\xa9\162\x68\145\x74\xc5\221", "\x77\x63\55\160\157\156\164")), null); goto Gpdig; lfY1j: if (!(!is_array($rin) || 200 !== wp_remote_retrieve_response_code($rin))) { goto jUrBP; } goto fXKPd; UXc8a: $trkURL = WC_Pont::$trk_urls["\147\154\x73"][$country] . "\57\164\x74\x5f\x70\x61\147\x65\137\170\x6d\x6c\56\160\x68\x70\77\160\143\154\x69\x64\75" . $pn; goto pj7Iu; ka_H5: $tracking = get_transient("\x70\x6f\156\164\137\164\141\x63\153\151\156\147\137" . $pn); goto nJlAW; sYhNO: $tracking = (object) ["\144\141\x74\145" => (string) $in->Parcel->Statuses->Status->attributes()->StDate, "\143\157\x64\x65" => $glsTrCode, "\143\141\x74\x65\x67\x6f\x72\x79" => '', "\x65\x76\x65\x6e\x74" => WC_Pont::$glsTrCodes->{$glsTrCode}, "\x6c\157\143\141\164\151\157\x6e" => (string) $in->Parcel->Statuses->Status->attributes()->DepoCity, "\143\x6f\x75\156\x74\x72\x79" => $country]; goto BXq2K; VUx2F: return array(sprintf("\x3c\x61\40\143\x6c\x61\x73\x73\75\x22\147\x6c\x73\40\45\x73\x22\40\164\141\162\147\145\x74\x3d\42\x5f\x62\x6c\141\x6e\153\x22\x20\x74\151\x74\x6c\x65\75\42\x25\163\42\40\150\x72\x65\146\x3d\x22\x25\163\42\40\144\x61\164\x61\x2d\x69\x6e\146\x6f\75\x22\107\x4c\123\x22\76\x25\x73\x3c\x2f\141\x3e", "\x65\x72\162\157\162", $tracking->date . "\x20" . $tracking->location, WC_Pont::$trk_urls["\x67\x6c\x73"][$country] . "\57\x74\x74\x5f\160\141\x67\145\56\160\150\160\77\164\164\137\166\141\x6c\165\x65\75" . $pn, $tracking->event), 0); goto YXAE4; pj7Iu: $rin = wp_remote_get($trkURL); goto lfY1j; Gpdig: jUrBP: goto vcHJG; Q1H3W: return array(sprintf("\74\141\40\x63\154\x61\163\x73\75\42\x67\154\x73\x20\163\45\163\x22\x20\164\x61\x72\147\145\x74\75\42\137\x62\x6c\x61\x6e\153\x22\x20\x74\x69\164\154\145\75\42\45\163\x22\40\150\x72\145\146\x3d\x22\x25\163\x22\40\x64\141\x74\x61\x2d\x69\x6e\146\x6f\75\x22\x54\162\x61\156\x73\42\76\45\163\74\57\x61\x3e", $tracking->code, $tracking->date . "\40" . $tracking->location, WC_Pont::$trk_urls["\147\x6c\163"][$tracking->country] . "\57\164\164\137\160\141\x67\x65\x2e\160\x68\160\77\164\164\137\166\141\154\165\x65\75" . $pn, $tracking->event), $tracking->code); goto rYEkR; JuOHD: } goto SV7Ok; IxITv: function contentOnLabel($order, $contents, $template) { goto PybNp; F31ZK: MQo9u: goto kgkAi; C8hJY: $order_id = $order->get_order_number(); goto ixo9b; yG0xv: if (!(sizeof($iTemplate) > 0)) { goto xdNpD; } goto iz4EJ; GZ0_Z: $template = strtr($template, $templateRep); goto AJOS5; PybNp: $customer_message = !empty($order->get_customer_note()) ? $order->get_customer_note() : ''; goto SdicP; iz4EJ: foreach ($contents as $content) { $itemTemplate[] = strtr(implode("\40", $iTemplate), array("\x5b\x74\x65\162\155\303\xa9\153\135" => $content["\x6e\x61\x6d\145"], "\x5b\143\x69\153\x6b\x73\172\303\241\x6d\135" => $content["\x73\x6b\165"], "\x5b\x6d\x65\x6e\x6e\171\x69\163\303\xa9\147\135" => $content["\x71\x74\x79"])); feDE6: } goto F31ZK; kgkAi: xdNpD: goto OCvVG; ixo9b: $templateRep = array("\x5b\155\145\x67\152\145\147\171\172\303\251\163\135" => $customer_message, "\x5b\xc3\272\x6a\163\x6f\x72\135" => "\12", "\133\162\x65\156\144\145\x6c\xc3\xa9\163\163\x7a\xc3\241\x6d\135" => $order_id); goto GZ0_Z; SDqvJ: wdrkE: goto yG0xv; OCvVG: return $template . "\40" . implode("\x7c", $itemTemplate); goto kdTfD; SdicP: $lItems = array("\x23" => "\133\x63\x69\153\x6b\163\172\xc3\241\155\135", '' => "\x5b\164\x65\x72\155\xc3\xa9\153\x5d", "\144\x62\x3a\x20" => "\x5b\155\x65\x6e\156\x79\x69\x73\xc3\xa9\x67\x5d"); goto mxYE2; AJOS5: foreach ($lItems as $k => $lItem) { goto abq8a; abq8a: if (!(strpos($template, $lItem) !== false)) { goto ZWkbF; } goto GvaXz; Nz8fp: $iTemplate[] = "\40" . $k . $lItem; goto eAJfF; s_zS8: T5n86: goto BxcBL; GvaXz: $template = str_replace($lItem, "\40", $template); goto Nz8fp; eAJfF: ZWkbF: goto s_zS8; BxcBL: } goto SDqvJ; mxYE2: $iTemplate = array(); goto bEwlg; bEwlg: $itemTemplate = array(); goto C8hJY; kdTfD: } goto HYdfv; HYdfv: function set_errors($orders, $error) { goto Jhhze; vHVEE: foreach ($orders as $order) { WC_Pont::st_array("\160\157\156\x74\x5f\x65\162\x72\x6f\162\163", $order, __("\x43\163\157\155\x61\147\x20\x68\x69\x62\141", "\167\x63\55\x70\157\x6e\x74") . "\x3a\40" . $error); iW1xm: } goto HQxGk; tupwT: goto yE0Rq; goto nLb71; S6poK: yE0Rq: goto K8elS; nLb71: HsjrI: goto vHVEE; Jhhze: if (is_array($orders)) { goto HsjrI; } goto zXXfn; HQxGk: a04bC: goto S6poK; zXXfn: WC_Pont::st_array("\160\x6f\156\x74\137\x65\x72\162\157\162\x73", $orders, __("\x43\163\157\155\x61\147\x20\x68\x69\142\141", "\x77\x63\55\x70\157\x6e\x74") . "\x3a\x20" . $error); goto tupwT; K8elS: } goto F9Vq9; SV7Ok: function get_gls_tracking_data($pn, $country = 0) { goto nGDdq; f_5PS: $rin = wp_remote_get($trkURL); goto NOwdJ; YCMEG: return null; goto cs5Ok; VMdgQ: return $glsTrCode; goto S8MAf; NOwdJ: if (!(!is_array($rin) || 200 !== wp_remote_retrieve_response_code($rin))) { goto TWrRe; } goto YCMEG; nGDdq: $country = $country ?: get_option("\x77\x63\x5f\160\x6f\x6e\164\137\147\154\163\137\x73\x65\x6e\144\x65\x72\137\143\157\165\156\164\162\171", "\x48\125"); goto cZEal; UQ1ZJ: if (!($rin["\142\x6f\144\x79"] == "\x45\x72\162\x23\x30\x32\x3a\40\x50\x61\x72\143\x65\x6c\40\156\165\x6d\142\145\x72\x28\163\51\40\x6e\157\164\40\146\x6f\x75\156\144\40\151\x6e\40\x64\x61\164\141\142\141\163\x65")) { goto mMqtC; } goto VUfUa; VUfUa: return 0; goto KvYmS; TeHh3: $glsTrCode = (int) $in->Parcel->Statuses->Status->attributes()->StCode; goto VMdgQ; cZEal: $trkURL = WC_Pont::$trk_urls["\x67\154\x73"][$country] . "\x2f\164\164\x5f\160\x61\147\x65\137\170\155\154\56\160\x68\160\x3f\160\x63\154\151\144\75" . $pn; goto f_5PS; KvYmS: mMqtC: goto eCWzm; eCWzm: $in = simplexml_load_string($rin["\142\x6f\x64\171"]); goto TeHh3; cs5Ok: TWrRe: goto UQ1ZJ; S8MAf: }
